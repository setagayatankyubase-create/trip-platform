<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <meta name="description" content="è‡ªç„¶ä½“é¨“ã‚’æä¾›ã™ã‚‹æä¾›å…ƒä¸€è¦§ã€‚ä¿¡é ¼ã§ãã‚‹ä¸»å‚¬è€…ã‚’è¦‹ã¤ã‘ã‚ˆã†ã€‚">
  <title>æä¾›å…ƒä¸€è¦§ | ãã¨ãªã³</title>
  <link rel="stylesheet" href="styles.css">
  <script>
    // GitHub raw URLï¼ˆå…¨ãƒšãƒ¼ã‚¸å…±é€šè¨­å®šï¼‰
    window.GITHUB_RAW_BASE = "https://raw.githubusercontent.com/setagayatankyubase-create/trip-platform/main";
  </script>
</head>
<body>
  <header class="main-header" id="main-header">
    <div class="nav">
      <div class="nav-left">
        <a href="index.html" class="logo">
          <img src="assets/sotonavi-logo.png" alt="ãã¨ãªã³" class="logo-image">
        </a>
      </div>
      <div class="nav-links">
        <a href="list.html">ã‚¤ãƒ™ãƒ³ãƒˆä¸€è¦§</a>
        <a href="organizer-list.html">æä¾›å…ƒ</a>
        <a href="column.html">ã‚³ãƒ©ãƒ </a>
      </div>
    </div>
  </header>

  <main class="container">
    <div style="margin: 20px 0;">
      <h1 style="margin: 0 0 8px 0; font-size: 1.5rem;">æä¾›å…ƒä¸€è¦§</h1>
      <p style="color: #6c7a72; margin: 0;">è‡ªç„¶ä½“é¨“ã‚’æä¾›ã™ã‚‹ä¿¡é ¼ã§ãã‚‹æä¾›å…ƒã‚’ã”ç´¹ä»‹ã—ã¾ã™</p>
    </div>

    <div id="organizer-list" style="display: grid; gap: 20px; margin-top: 24px;"></div>
  </main>

  <footer class="main-footer">
    <div class="footer-content">
      <div class="footer-column">
        <h3>ã‚µãƒãƒ¼ãƒˆ</h3>
        <a href="contact.html">ãŠå•ã„åˆã‚ã›</a>
        <a href="terms.html">åˆ©ç”¨è¦ç´„</a>
        <a href="privacy.html">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
      </div>
      <div class="footer-column">
        <h3>é‹å–¶æƒ…å ±</h3>
        <a href="about.html">é‹å–¶ã«ã¤ã„ã¦</a>
        <a href="publish.html">æ²è¼‰ã«ã¤ã„ã¦</a>
      </div>
    </div>
    <div class="footer-bottom">
      <div class="footer-copyright">
        Â© <span id="current-year"></span> ãã¨ãªã³. è£½ä½œ
      </div>
    </div>
  </footer>

  <script src="data.js?v=3_2025-12-21"></script>
  <script>
    function renderOrganizers() {
      const container = document.getElementById('organizer-list');
      if (!container) return;

      if (eventData.organizers.length === 0) {
        container.innerHTML = `
          <div class="empty-state">
            <div class="empty-state-icon">ğŸ¢</div>
          <h3>æä¾›å…ƒãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã§ã—ãŸ</h3>
          </div>
        `;
        return;
      }

      container.innerHTML = eventData.organizers.map(org => {
        const events = eventData.events.filter(e => (e.organizerId || e.organizer_id) === org.id);
        return `
          <div class="organizer-card">
            <div class="organizer-header">
              <img src="${org.logo}" alt="${org.name}" class="organizer-logo">
              <div class="organizer-info" style="flex: 1;">
                <h3 style="margin: 0 0 8px 0;">
                  <a href="organizer-detail.html?id=${org.id}" style="color: inherit; text-decoration: none;">
                    ${org.name}
                  </a>
                </h3>
                <p style="margin: 0; color: #6c7a72; line-height: 1.6;">${org.description}</p>
                <div class="organizer-meta">
                  <span>è¨­ç«‹: ${org.establishedYear}å¹´</span>
                  <span> â€¢ </span>
                  <span>è©•ä¾¡: â˜…${org.rating} (${org.reviewCount}ä»¶)</span>
                  <span> â€¢ </span>
                  <span>é–‹å‚¬ã‚¤ãƒ™ãƒ³ãƒˆ: ${events.length}ä»¶</span>
                </div>
              </div>
            </div>
            <div style="margin-top: 16px;">
              <a href="organizer-detail.html?id=${org.id}" class="btn" style="display: inline-block; text-align: center; padding: 12px 24px;">
                è©³ç´°ã‚’è¦‹ã‚‹ â†’
              </a>
            </div>
          </div>
        `;
      }).join('');
    }

    document.addEventListener('DOMContentLoaded', async () => {
      try {
        // APIã‹ã‚‰ã‚¤ãƒ™ãƒ³ãƒˆãƒ»æä¾›å…ƒãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿
        await loadEventData();

        const yearElement = document.getElementById('current-year');
        if (yearElement) {
          yearElement.textContent = new Date().getFullYear();
        }
        renderOrganizers();
        
        // æ¤œç´¢å‡¦ç†ï¼ˆãƒ˜ãƒƒãƒ€ãƒ¼æ¤œç´¢æ¬„ç”¨ï¼‰
        window.handleSearch = function handleSearch(event) {
          event.preventDefault();
          const formData = new FormData(event.target);
          const params = {
            q: formData.get('q') || '',
            category: formData.get('category') || '',
            date: formData.get('date') || '',
            area: formData.get('area') || ''
          };
          const urlParams = new URLSearchParams();
          Object.keys(params).forEach(key => {
            if (params[key]) urlParams.set(key, params[key]);
          });
          window.location.href = `list.html?${urlParams.toString()}`;
        };
      } catch (e) {
        console.error(e);
        const el = document.getElementById('error');
        if (el) el.textContent = 'ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ';
      }
    });
  </script>
</body>
</html>

